<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quran NFC Verse</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: #f5f5f5;
        }
        .verse-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: inline-block;
            max-width: 90%;
        }
        .arabic {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            direction: rtl;
        }
        .translation {
            font-size: 18px;
            color: #555;
        }
        select, button {
            margin-top: 10px;
            padding: 8px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h2>Quran NFC Verse</h2>
    <div class="verse-box">
        <p class="arabic" id="arabic-text"></p>
        <p class="translation" id="translation-text"></p>
        <audio id="audio-player" controls style="margin-top: 10px; display: block;"></audio>
    </div>
    <select id="language-selector">
        <option value="arabic">العربية</option>
        <option value="english">English</option>
        <option value="french">Français</option>
        <option value="urdu">اردو</option>
    </select>
    <button onclick="showRandomVerse()">Refresh Verse</button>
    <button onclick="playAudio()">Play Recitation</button>
    
    <script>
        const verses = [
            {
                arabic: "إِنَّ مَعَ ٱلْعُسْرِ يُسْرًۭا فَإِذَا فَرَغْتَ فَٱنصَبْ وَإِلَىٰ رَبِّكَ فَٱرْغَبْ",
                translations: {
                    english: "Indeed, with hardship comes ease. So when you have finished [your duties], then stand up [for worship]. And to your Lord direct [your] longing.",
                    french: "En vérité, avec la difficulté vient la facilité. Alors, quand tu as terminé [tes obligations], lève-toi [pour prier] et tourne-toi vers ton Seigneur avec ardeur.",
                    urdu: "بیشک مشکل کے ساتھ آسانی ہے۔ پس جب تو فارغ ہو، تو عبادت کے لیے کھڑا ہو جا اور اپنے رب کی طرف متوجہ ہو۔"
                },
                audio: "https://download.quranicaudio.com/quran/abdurrahmaan_as-sudais/094006.mp3"
            },
            {
                arabic: "ٱللَّهُ نُورُ ٱلسَّمَـٰوَٰتِ وَٱلْأَرْضِ ۚ مَثَلُ نُورِهِۦ كَمِشْكَوٰةٍ فِيهَا مِصْبَاحٌ ٱلْمِصْبَاحُ فِى زُجَاجَةٍ...",
                translations: {
                    english: "Allah is the Light of the heavens and the earth. The example of His light is like a niche within which is a lamp...",
                    french: "Allah est la lumière des cieux et de la terre. L'exemple de Sa lumière est comme une niche où se trouve une lampe...",
                    urdu: "اللہ آسمانوں اور زمین کا نور ہے۔ اس کے نور کی مثال ایسی ہے جیسے ایک طاق جس میں چراغ ہو..."
                },
                audio: "https://download.quranicaudio.com/quran/abdurrahmaan_as-sudais/024035.mp3"
            }
        ];

        function showRandomVerse() {
            const randomIndex = Math.floor(Math.random() * verses.length);
            const verse = verses[randomIndex];
            const language = document.getElementById("language-selector").value;
            
            document.getElementById("arabic-text").innerText = verse.arabic;
            document.getElementById("translation-text").innerText = verse.translations[language];
            
            const audioPlayer = document.getElementById("audio-player");
            audioPlayer.src = verse.audio;
            audioPlayer.load(); // 确保音频正确加载
        }

        function playAudio() {
            const audioPlayer = document.getElementById("audio-player");
            if (audioPlayer.src && audioPlayer.readyState >= 2) { // 确保音频已加载
                console.log("Playing audio: ", audioPlayer.src);
                audioPlayer.play().catch(error => console.log("Playback error: ", error));
            } else {
                console.log("Audio not ready");
            }
        }

        document.getElementById("language-selector").addEventListener("change", showRandomVerse);
        window.onload = showRandomVerse;
    </script>
</body>
</html>
